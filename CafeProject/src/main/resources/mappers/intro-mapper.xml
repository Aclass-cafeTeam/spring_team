<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="introMapper">
	
		<resultMap type="IntroBoard" id="introBoard_rm">
			  <id property="boardNo" column="BOARD_NO"/>
				<result property="boardTitle" column="BOARD_TITLE"/>
	      <result property="readCount" column="READ_COUNT"/>
	      <result property="boardDeleteFlag" column="BOARD_DEL_FL"/>
	      <result property="commentCount" column="COMMENT_COUNT"/>
	      <result property="noticeFl" column="NOTICE_FL"/>
	      <result property="commentNo" column="COMMENT_NO"/>
	      <result property="commentDelFl" column="COMMENT_DEL_FL"/>
	      <result property="memberNickname" column="MEMBER_NICKNAME"/>
		</resultMap>
		
		<!-- 전체글조회 -->
		<select id="selectBoardList" parameterType="_int" resultMap="introBoard_rm">
			SELECT BOARD_TITLE, READ_COUNT,
			(SELECT COUNT(*) FROM "COMMENT" C
			WHERE C.BOARD_NO = B.BOARD_NO) COMMENT_COUNT
			FROM "BOARD" B
			WHERE BOARD_DEL_FL = 'N'
			ORDER BY BOARD_NO DESC
		</select>
		
		<!-- 전체공지만 조회 -->
		<select id="selectNoticeList" parameterType="_int" resultMap="introBoard_rm">
			SELECT BOARD_TITLE, READ_COUNT,
				(SELECT COUNT(*) FROM "COMMENT" C
				WHERE C.BOARD_NO = B.BOARD_NO) COMMENT_COUNT
			FROM "BOARD" B
			WHERE NOTICE_FL = 2
			ORDER BY BOARD_NO DESC
		</select>
		
		<!-- 여행후기 게시판 글 조회 -->
		<select id="selectTravelReview" parameterType="_int" resultMap="introBoard_rm">
			SELECT BOARD_NO, BOARD_TITLE, MEMBER_NICKNAME, READ_COUNT, 
							(SELECT COUNT(*) FROM "COMMENT" C
							WHERE C.BOARD_NO =B.BOARD_NO) COMMENT_COUNT
			FROM BOARD B
			JOIN MEMBER USING(MEMBER_NO)
			WHERE BOARD_DEL_FL = 'N'
			AND BOARD_CODE = 12
			ORDER BY BOARD_NO DESC
		</select>
		
		<!-- 메인 화면(카테고리/게시판이름) -->
		<select id="selectMainList" resultType="map">
			SELECT MAIN_CATEGORY_NO, MAIN_CATEGORY_NAME, BOARD_CODE, BOARD_NAME
			FROM BOARD_TYPE 
			JOIN MAIN_CATEGORY USING(MAIN_CATEGORY_NO)
		</select>
	

      
 
 
</mapper>
